import { db } from '@/db';
import { backtestTrades } from '@/db/schema';

async function main() {
    const sampleBacktestTrades = [
        {
            backtestId: 1,
            assetId: 1,
            tradeType: 'STRANGLE',
            side: 'SELL',
            entryDate: '2023-10-15T09:30:00.000Z',
            exitDate: '2023-10-17T16:00:00.000Z',
            entryPrice: 18.50,
            exitPrice: 5.20,
            quantity: 5,
            commission: 10.00,
            slippage: 5.50,
            pnl: 6615.00,
            pnlPercentage: 71.89,
            maxAdverseExcursion: -825.00,
            maxFavorableExcursion: 7200.00,
            holdDurationHours: 54.5,
            entrySignals: { iv_rank: 82, iv_percentile: 88, earnings_days: 2, liquidity_score: 0.95 },
            exitReason: 'PROFIT_TARGET',
            greeksAtEntry: { delta: 0.02, gamma: 0.08, theta: -45.2, vega: 125.5 },
            greeksAtExit: { delta: 0.01, gamma: 0.03, theta: -12.3, vega: 38.2 }
        },
        {
            backtestId: 1,
            assetId: 7,
            tradeType: 'OPTION',
            side: 'BUY',
            entryDate: '2023-11-02T10:15:00.000Z',
            exitDate: '2023-11-03T14:30:00.000Z',
            entryPrice: 8.40,
            exitPrice: 4.10,
            quantity: 10,
            commission: 10.00,
            slippage: 4.20,
            pnl: -4314.20,
            pnlPercentage: -51.36,
            maxAdverseExcursion: -4800.00,
            maxFavorableExcursion: 320.00,
            holdDurationHours: 28.25,
            entrySignals: { iv_rank: 75, momentum_signal: 0.82, volume_surge: 1.45 },
            exitReason: 'STOP_LOSS',
            greeksAtEntry: { delta: 0.65, gamma: 0.04, theta: -28.5, vega: 88.3 },
            greeksAtExit: { delta: 0.38, gamma: 0.02, theta: -15.2, vega: 42.1 }
        },
        {
            backtestId: 1,
            assetId: 6,
            tradeType: 'STRADDLE',
            side: 'SELL',
            entryDate: '2023-10-20T11:00:00.000Z',
            exitDate: '2023-10-23T15:30:00.000Z',
            entryPrice: 22.80,
            exitPrice: 10.50,
            quantity: 3,
            commission: 8.00,
            slippage: 3.50,
            pnl: 3678.50,
            pnlPercentage: 53.95,
            maxAdverseExcursion: -450.00,
            maxFavorableExcursion: 3800.00,
            holdDurationHours: 76.5,
            entrySignals: { iv_rank: 78, iv_percentile: 85, earnings_days: 3, liquidity_score: 0.92 },
            exitReason: 'PROFIT_TARGET',
            greeksAtEntry: { delta: 0.01, gamma: 0.12, theta: -52.8, vega: 148.2 },
            greeksAtExit: { delta: 0.02, gamma: 0.05, theta: -18.5, vega: 52.3 }
        },
        {
            backtestId: 1,
            assetId: 8,
            tradeType: 'SPREAD',
            side: 'BUY',
            entryDate: '2023-11-10T09:45:00.000Z',
            exitDate: '2023-11-15T16:00:00.000Z',
            entryPrice: 4.25,
            exitPrice: 6.80,
            quantity: 15,
            commission: 12.00,
            slippage: 2.80,
            pnl: 2337.20,
            pnlPercentage: 36.59,
            maxAdverseExcursion: -320.00,
            maxFavorableExcursion: 2450.00,
            holdDurationHours: 126.25,
            entrySignals: { iv_rank: 45, support_level: 442.50, rsi: 38, volume_score: 0.88 },
            exitReason: 'PROFIT_TARGET',
            greeksAtEntry: { delta: 0.42, gamma: 0.06, theta: -18.2, vega: 72.5 },
            greeksAtExit: { delta: 0.58, gamma: 0.04, theta: -12.8, vega: 48.3 }
        },
        {
            backtestId: 1,
            assetId: 9,
            tradeType: 'CALENDAR',
            side: 'SELL',
            entryDate: '2023-10-25T10:30:00.000Z',
            exitDate: '2023-11-08T14:00:00.000Z',
            entryPrice: 3.60,
            exitPrice: 2.35,
            quantity: 8,
            commission: 9.00,
            slippage: 2.20,
            pnl: 891.80,
            pnlPercentage: 30.89,
            maxAdverseExcursion: -180.00,
            maxFavorableExcursion: 950.00,
            holdDurationHours: 339.5,
            entrySignals: { iv_skew: 0.15, term_structure: 'backwardation', liquidity_score: 0.94 },
            exitReason: 'TIME_STOP',
            greeksAtEntry: { delta: -0.08, gamma: 0.03, theta: 8.5, vega: -22.4 },
            greeksAtExit: { delta: -0.05, gamma: 0.02, theta: 4.2, vega: -12.8 }
        },
        {
            backtestId: 1,
            assetId: 5,
            tradeType: 'STRADDLE',
            side: 'BUY',
            entryDate: '2023-11-18T13:15:00.000Z',
            exitDate: '2023-11-20T10:45:00.000Z',
            entryPrice: 16.40,
            exitPrice: 28.90,
            quantity: 4,
            commission: 8.00,
            slippage: 4.50,
            pnl: 4937.50,
            pnlPercentage: 75.23,
            maxAdverseExcursion: -680.00,
            maxFavorableExcursion: 5100.00,
            holdDurationHours: 45.5,
            entrySignals: { iv_rank: 92, volatility_expansion: 1.85, event_catalyst: 'earnings', liquidity_score: 0.89 },
            exitReason: 'PROFIT_TARGET',
            greeksAtEntry: { delta: 0.05, gamma: 0.15, theta: -68.5, vega: 185.2 },
            greeksAtExit: { delta: 0.28, gamma: 0.09, theta: -42.3, vega: 128.7 }
        },
        {
            backtestId: 1,
            assetId: 2,
            tradeType: 'SPREAD',
            side: 'SELL',
            entryDate: '2023-12-01T09:00:00.000Z',
            exitDate: '2023-12-04T15:30:00.000Z',
            entryPrice: 5.80,
            exitPrice: 7.95,
            quantity: 6,
            commission: 7.00,
            slippage: 3.10,
            pnl: -1411.10,
            pnlPercentage: -40.60,
            maxAdverseExcursion: -1520.00,
            maxFavorableExcursion: 150.00,
            holdDurationHours: 78.5,
            entrySignals: { iv_rank: 58, resistance_level: 378.50, macd_signal: -0.45 },
            exitReason: 'STOP_LOSS',
            greeksAtEntry: { delta: -0.35, gamma: 0.05, theta: 12.8, vega: -52.3 },
            greeksAtExit: { delta: -0.48, gamma: 0.03, theta: 8.5, vega: -38.2 }
        },
        {
            backtestId: 1,
            assetId: 6,
            tradeType: 'CALENDAR',
            side: 'BUY',
            entryDate: '2023-11-28T11:45:00.000Z',
            exitDate: '2023-12-15T16:00:00.000Z',
            entryPrice: 7.20,
            exitPrice: 9.85,
            quantity: 7,
            commission: 9.50,
            slippage: 3.80,
            pnl: 1812.70,
            pnlPercentage: 35.92,
            maxAdverseExcursion: -420.00,
            maxFavorableExcursion: 1900.00,
            holdDurationHours: 412.25,
            entrySignals: { iv_term_structure: 'steep_contango', front_month_iv: 45, back_month_iv: 38 },
            exitReason: 'SIGNAL_EXIT',
            greeksAtEntry: { delta: 0.12, gamma: -0.02, theta: -15.5, vega: 42.8 },
            greeksAtExit: { delta: 0.18, gamma: -0.01, theta: -8.2, vega: 28.5 }
        },
        {
            backtestId: 1,
            assetId: 8,
            tradeType: 'OPTION',
            side: 'SELL',
            entryDate: '2023-12-08T10:00:00.000Z',
            exitDate: '2023-12-11T13:30:00.000Z',
            entryPrice: 12.50,
            exitPrice: 15.80,
            quantity: 5,
            commission: 7.50,
            slippage: 2.90,
            pnl: -1760.40,
            pnlPercentage: -28.17,
            maxAdverseExcursion: -1850.00,
            maxFavorableExcursion: 280.00,
            holdDurationHours: 75.5,
            entrySignals: { iv_rank: 68, put_call_ratio: 1.25, skew_index: 0.22 },
            exitReason: 'STOP_LOSS',
            greeksAtEntry: { delta: -0.42, gamma: 0.08, theta: 32.5, vega: -88.4 },
            greeksAtExit: { delta: -0.58, gamma: 0.06, theta: 28.2, vega: -72.8 }
        },
        {
            backtestId: 1,
            assetId: 9,
            tradeType: 'STRANGLE',
            side: 'BUY',
            entryDate: '2023-12-18T14:30:00.000Z',
            exitDate: '2023-12-20T11:00:00.000Z',
            entryPrice: 9.30,
            exitPrice: 11.85,
            quantity: 9,
            commission: 11.00,
            slippage: 4.70,
            pnl: 2139.30,
            pnlPercentage: 25.51,
            maxAdverseExcursion: -520.00,
            maxFavorableExcursion: 2250.00,
            holdDurationHours: 44.5,
            entrySignals: { iv_rank: 35, vix_level: 18.5, expected_move: 2.8, liquidity_score: 0.96 },
            exitReason: 'PROFIT_TARGET',
            greeksAtEntry: { delta: 0.08, gamma: 0.11, theta: -38.5, vega: 112.3 },
            greeksAtExit: { delta: 0.15, gamma: 0.08, theta: -28.2, vega: 82.5 }
        }
    ];

    await db.insert(backtestTrades).values(sampleBacktestTrades);
    
    console.log('✅ Backtest trades seeder completed successfully');
}

main().catch((error) => {
    console.error('❌ Seeder failed:', error);
});